%% To generate Different card for vasp2wannier
function wannier90_win_gen(SOCflag,num_bands,num_wan,Nmin,Nmax,Nbands)
fid = fopen('wannier90.win.bk','w');
if SOCflag==1
    %% num_band card
    for flag=1:1
        fprintf(fid,"num_bands = %d\n",num_bands);
        fprintf(fid,"num_wann  = %d\n",num_wan*2);
        if num_wan*2>num_bands
            disp("check write_pj");
        end
        fprintf(fid,"exclude_bands=1-%d,%d-%d\n",Nmin-1,Nmax+1,Nbands);
        disp("!check this card !");
    end

    %% standard_card1 
    fprintf(fid, ...
    "num_iter = 20 \n "+ ...
    "num_print_cycles=100 \n\n "+ ...
    " conv_window = 20\n"+ ...
    " !conv_tol = 0.0001\n"+ ...
    " !conv_noise_amp = 1\n"+ ...
    " !conv_noise_num = 3\n\n"+ ...
    " !dis_win_max = 11.1934\n "+ ...
    " !dis_win_min = -1.0000\n"+ ...
    " !dis_froz_min     = -0.5\n"+ ...
    " !dis_froz_max     = 0.5\n"+ ...
    " !dis_num_iter     = 200\n"+ ...
    " !dis_mix_ratio    = 0.5\n"+ ...
    " !dis_conv_window  = 1.0E-10\n\n"+ ...
    " write_proj = .true.\n"+ ...
    " write_xyz = .true.\n"+ ...
    " translate_home_cell = .false.\n"+ ...
    " iprint=3 \n"+ ...
    " guiding_centres = .true.\n\n" ...
    );
    %% projections card
    phns='wannier90projector_card'; %?????????????
    fpn=fopen(phns,'rt');%??????
    while feof(fpn) ~= 1 %????????p???????????????????????1?????0??
       file=fgetl(fpn);%????????
       new_str=file;
       fprintf(fid,'%s\n',new_str);%???????????txt?????
    end
    %% kpath card
      fprintf(fid,"\n");
    phns='wannier90kpath_card'; %?????????????
    fpn=fopen(phns,'rt');%??????
    kline=-2;
    while feof(fpn) ~= 1 %????????p???????????????????????1?????0??
       file=fgetl(fpn);%????????
       new_str=file;
       fprintf(fid,'%s\n',new_str);%???????????txt?????
       kline=kline+1;
    end
    %% standard_card2 
    fprintf(fid,"\n");
    fprintf(fid, ...
     "bands_plot = .true.\n"+ ...
     "bands_plot_format = xmgrace gnuplot\n"+ ...
    " !wannier_plot = .true.\n"+ ...
    " !hr_plot = .true.\n"+ ...
    " write_hr = .true."+ ...
    " !fermi_surface_plot = .true. \n"+ ...
    " spinors = .true.\n");
    fprintf(fid," bands_num_points  = %d\n",kline*30);
% end ____________________________________________________________________________________________________________
else
        %% num_band card
        for flag=1:1
            fprintf(fid,"num_bands = %d\n",num_bands);
            fprintf(fid,"num_wann  = %d\n",num_wan);
            if num_wan>num_bands
                disp("check write_pj");
            end
            fprintf(fid,"exclude_bands=1-%d,%d-%d\n",Nmin-1,Nmax+1,Nbands);
            disp("!check this card !");
        end

        %% standard_card1
        fprintf(fid, ...
        "num_iter = 20 \n "+ ...
        "num_print_cycles=1000 \n\n "+ ...
        " conv_window = 20\n"+ ...
        " !conv_tol = 0.0001\n"+ ...
        " !conv_noise_amp = 1\n"+ ...
        " !conv_noise_num = 3\n\n"+ ...
        " !dis_win_max = 11.1934\n "+ ...
        " !dis_win_min = -1.0000\n"+ ...
        " !dis_froz_min     = -0.5\n"+ ...
        " !dis_froz_max     = 0.5\n"+ ...
        " !dis_num_iter     = 200\n"+ ...
        " !dis_mix_ratio    = 0.5\n"+ ...
        " !dis_conv_window  = 1.0E-10\n\n"+ ...
        " write_proj = .true.\n"+ ...
        " write_xyz = .true.\n"+ ...
        " translate_home_cell = .false.\n"+ ...
        " iprint=3 \n"+ ...
        " guiding_centres = .true.\n\n" ...
        );
        %% projections card
        phns='wannier90projector_card'; %?????????????
        fpn=fopen(phns,'rt');%??????
        while feof(fpn) ~= 1 %????????p???????????????????????1?????0??
           file=fgetl(fpn);%????????
           new_str=file;
           fprintf(fid,'%s\n',new_str);%???????????txt?????
        end
        %% kpath card
          fprintf(fid,"\n");
        phns='wannier90kpath_card'; %?????????????
        fpn=fopen(phns,'rt');%??????
        kline=-2;
        while feof(fpn) ~= 1 %????????p???????????????????????1?????0??
           file=fgetl(fpn);%????????
           new_str=file;
           fprintf(fid,'%s\n',new_str);%???????????txt?????
           kline=kline+1;
        end
        %% standard_card2
        fprintf(fid,"\n");
        fprintf(fid, ...
         "bands_plot = .true.\n"+ ...
         "bands_plot_format = xmgrace gnuplot\n"+ ...
        " !wannier_plot = .true.\n"+ ...
        " !hr_plot = .true.\n"+ ...
        " write_hr = .true."+ ...
        " !fermi_surface_plot = .true. \n"+ ...
        " !spinors = .true.\n");
        fprintf(fid," bands_num_points  = %d\n",kline*30);
    % end ____________________________________________________________________________________________________________
end


fclose(fid);
end

